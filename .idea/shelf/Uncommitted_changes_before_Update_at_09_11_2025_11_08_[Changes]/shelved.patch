Index: js/app.js
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>// ===== Contact form validation =====\r\nconst contactForm = document.getElementById('contactForm');\r\nif (contactForm) {\r\n    const g = id => document.getElementById(id);\r\n    const cName = g('cName');\r\n    const cEmail = g('cEmail');\r\n    const cMessage = g('cMessage');\r\n    const cAgree = g('cAgree');\r\n    const contactStatus = g('contactStatus');\r\n\r\n    const err = id => g(id);\r\n    const show = (el, msg) => {\r\n        if (el) {\r\n            el.textContent = msg;\r\n            el.classList.remove('d-none');\r\n        }\r\n    };\r\n    const hide = el => {\r\n        if (el) el.classList.add('d-none');\r\n    };\r\n    const isEmail = v => /^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/.test(v);\r\n\r\n    function validateContact() {\r\n        let ok = true;\r\n        ['err-cName', 'err-cEmail', 'err-cMessage', 'err-cAgree'].forEach(i => hide(err(i)));\r\n        contactStatus.innerHTML = '';\r\n\r\n        if (!cName.value.trim()) {\r\n            show(err('err-cName'), 'Enter your name.');\r\n            ok = false;\r\n        }\r\n        const e = cEmail.value.trim();\r\n        if (!e || !isEmail(e)) {\r\n            show(err('err-cEmail'), 'Enter a valid email.');\r\n            ok = false;\r\n        }\r\n        const m = cMessage.value.trim();\r\n        if (m.length < 10) {\r\n            show(err('err-cMessage'), 'Message must be at least 10 characters.');\r\n            ok = false;\r\n        }\r\n        if (!cAgree.checked) {\r\n            show(err('err-cAgree'), 'You must agree before submitting.');\r\n            ok = false;\r\n        }\r\n\r\n        return ok;\r\n    }\r\n\r\n    contactForm.addEventListener('submit', (e) => {\r\n        e.preventDefault();\r\n        if (validateContact()) {\r\n            contactStatus.innerHTML = \"<p class='text-success mb-0'>Message sent successfully.</p>\";\r\n            contactForm.reset();\r\n        } else {\r\n            contactStatus.innerHTML = \"<p class='text-danger mb-0'>Please fix the errors above.</p>\";\r\n        }\r\n    });\r\n\r\n    [cName, cEmail, cMessage, cAgree].forEach(el => el && el.addEventListener('input', validateContact));\r\n\r\n    const modal = document.getElementById('modal');\r\n    const open = () => modal.classList.remove('hidden');\r\n    const close = () => modal.classList.add('hidden');\r\n    document.getElementById('openPopup')?.addEventListener('click', open);\r\n    document.getElementById('closePopup')?.addEventListener('click', close);\r\n    modal?.addEventListener('click', e => {\r\n        if (e.target.classList.contains('backdrop')) close();\r\n    });\r\n    document.addEventListener('keydown', e => {\r\n        if (e.key === 'Escape') close();\r\n    });\r\n\r\n// ===== Background color cycler button on cancellation-policy page =====\r\n    (() => {\r\n        const btn = document.getElementById('bgBtn');\r\n        if (!btn) return;\r\n        const colors = ['#f6f7f9', '#ffe8a1', '#d1f7c4', '#cde3ff', '#ffd1dc'];\r\n        let i = 0;\r\n        btn.addEventListener('click', () => {\r\n            const next = colors[i++ % colors.length];\r\n            document.body.style.backgroundColor = next;\r\n            const section = document.querySelector('.policy-section');\r\n            if (section) section.style.backgroundColor = next;\r\n        });\r\n    })();\r\n\r\n    const chatForm = document.querySelector('#chat-form');\r\n    const chatContainer = document.querySelector('#chat-bubbles');\r\n\r\n    if (chatForm && chatContainer) {\r\n        chatForm.addEventListener('submit', function (e) {\r\n            e.preventDefault();\r\n            const input = document.querySelector('#chat-input');\r\n            const userMessage = (input?.value || '').trim();\r\n            if (!userMessage) return;\r\n\r\n            const userBubble = document.createElement('div');\r\n            userBubble.classList.add('chat-bubble', 'user');\r\n            userBubble.textContent = userMessage;\r\n            chatContainer.appendChild(userBubble);\r\n\r\n            // автоскролл вниз\r\n            chatContainer.scrollTop = chatContainer.scrollHeight;\r\n\r\n            setTimeout(() => {\r\n                const botMessage = 'We will respond soon.';\r\n                const botBubble = document.createElement('div');\r\n                botBubble.classList.add('chat-bubble', 'bot');\r\n                botBubble.textContent = botMessage;\r\n                chatContainer.appendChild(botBubble);\r\n\r\n                // автоскролл вниз\r\n                chatContainer.scrollTop = chatContainer.scrollHeight;\r\n\r\n                playBeep();\r\n            }, 500);\r\n\r\n            input.value = '';\r\n        });\r\n    }\r\n\r\n\r\n    document.querySelectorAll('.accordion-button').forEach(button => {\r\n        button.addEventListener('click', function () {\r\n            const panel = button.nextElementSibling;\r\n            if (panel.style.maxHeight) {\r\n                panel.style.maxHeight = null;\r\n            } else {\r\n                panel.style.maxHeight = panel.scrollHeight + 'px';\r\n            }\r\n            button.classList.toggle('active');\r\n        });\r\n    });\r\n\r\n    function playBeep() {\r\n        const audio = new Audio('assets/sounds/beep.mp3');\r\n        audio.play();\r\n    }\r\n\r\n\r\n    const accordionHeaders = document.querySelectorAll('.accordion-header');\r\n\r\n\r\n    accordionHeaders.forEach(header => {\r\n        header.addEventListener('click', function () {\r\n            const content = this.nextElementSibling;\r\n            const isOpen = content.classList.contains('open');\r\n\r\n\r\n            if (isOpen) {\r\n                content.classList.remove('open');\r\n                this.classList.remove('open');\r\n            } else {\r\n                content.classList.add('open');\r\n                this.classList.add('open');\r\n            }\r\n        });\r\n    });\r\n\r\n// ===== SCROLL PROGRESS BAR =====\r\n    function initScrollProgressBar() {\r\n        const progressBar = document.getElementById('scroll-progress');\r\n        if (!progressBar) return;\r\n\r\n        function updateProgressBar() {\r\n            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n            const scrollHeight = document.documentElement.scrollHeight - window.innerHeight;\r\n            const scrollPercent = (scrollTop / scrollHeight) * 100;\r\n\r\n            progressBar.style.width = Math.min(scrollPercent, 100) + '%';\r\n\r\n            // Add visual feedback based on scroll position\r\n            if (scrollPercent > 80) {\r\n                progressBar.style.background = 'linear-gradient(90deg, #ff6b6b, #ff8e8e)';\r\n            } else if (scrollPercent > 50) {\r\n                progressBar.style.background = 'linear-gradient(90deg, #ffa726, #ffb74d)';\r\n            } else {\r\n                progressBar.style.background = 'linear-gradient(90deg, #5a67ff, #00d4ff)';\r\n            }\r\n        }\r\n\r\n        // Throttle scroll events for better performance\r\n        let ticking = false;\r\n\r\n        function requestTick() {\r\n            if (!ticking) {\r\n                requestAnimationFrame(updateProgressBar);\r\n                ticking = true;\r\n            }\r\n        }\r\n\r\n        function handleScroll() {\r\n            ticking = false;\r\n            requestTick();\r\n        }\r\n\r\n        window.addEventListener('scroll', handleScroll, {passive: true});\r\n        updateProgressBar(); // Initial call\r\n    }\r\n\r\n// ===== NOTIFICATION SYSTEM =====\r\n    class NotificationSystem {\r\n        constructor() {\r\n            this.container = this.createContainer();\r\n            this.notifications = new Map();\r\n            this.defaultDuration = 5000;\r\n        }\r\n\r\n        createContainer() {\r\n            let container = document.getElementById('notification-container');\r\n            if (!container) {\r\n                container = document.createElement('div');\r\n                container.id = 'notification-container';\r\n                container.style.cssText = `\r\n                position: fixed;\r\n                top: 20px;\r\n                right: 20px;\r\n                z-index: 10000;\r\n                display: flex;\r\n                flex-direction: column;\r\n                gap: 10px;\r\n                max-width: 400px;\r\n                pointer-events: none;\r\n            `;\r\n                document.body.appendChild(container);\r\n            }\r\n            return container;\r\n        }\r\n\r\n        show(message, type = 'info', duration = this.defaultDuration, options = {}) {\r\n            const id = Date.now() + Math.random();\r\n            const notification = this.createNotification(id, message, type, options);\r\n\r\n            this.container.appendChild(notification);\r\n            this.notifications.set(id, notification);\r\n\r\n            // Animate in\r\n            requestAnimationFrame(() => {\r\n                notification.classList.add('show');\r\n            });\r\n\r\n            // Auto remove\r\n            if (duration > 0) {\r\n                setTimeout(() => {\r\n                    this.remove(id);\r\n                }, duration);\r\n            }\r\n\r\n            return id;\r\n        }\r\n\r\n        createNotification(id, message, type, options) {\r\n            const notification = document.createElement('div');\r\n            notification.className = `bluewave-notification ${type}`;\r\n            notification.dataset.id = id;\r\n\r\n            const icon = this.getIcon(type);\r\n            const title = options.title || this.getDefaultTitle(type);\r\n\r\n            notification.innerHTML = `\r\n            <div class=\"notification-content\">\r\n                <div class=\"notification-icon\">${icon}</div>\r\n                <div class=\"notification-body\">\r\n                    <div class=\"notification-title\">${title}</div>\r\n                    <div class=\"notification-message\">${message}</div>\r\n                </div>\r\n                <button class=\"notification-close\" onclick=\"notificationSystem.remove(${id})\">×</button>\r\n            </div>\r\n        `;\r\n\r\n            // Add click to dismiss\r\n            notification.addEventListener('click', (e) => {\r\n                if (!e.target.classList.contains('notification-close')) {\r\n                    this.remove(id);\r\n                }\r\n            });\r\n\r\n            return notification;\r\n        }\r\n\r\n        getIcon(type) {\r\n            const icons = {\r\n                success: '✅',\r\n                error: '❌',\r\n                warning: '⚠\uFE0F',\r\n                info: 'ℹ\uFE0F',\r\n                loading: '⏳'\r\n            };\r\n            return icons[type] || icons.info;\r\n        }\r\n\r\n        getDefaultTitle(type) {\r\n            const titles = {\r\n                success: 'Success',\r\n                error: 'Error',\r\n                warning: 'Warning',\r\n                info: 'Information',\r\n                loading: 'Loading'\r\n            };\r\n            return titles[type] || 'Notification';\r\n        }\r\n\r\n        remove(id) {\r\n            const notification = this.notifications.get(id);\r\n            if (notification) {\r\n                notification.classList.add('hide');\r\n                setTimeout(() => {\r\n                    if (notification.parentNode) {\r\n                        notification.parentNode.removeChild(notification);\r\n                    }\r\n                    this.notifications.delete(id);\r\n                }, 300);\r\n            }\r\n        }\r\n\r\n        clear() {\r\n            this.notifications.forEach((notification, id) => {\r\n                this.remove(id);\r\n            });\r\n        }\r\n\r\n        // Convenience methods\r\n        success(message, duration, options) {\r\n            return this.show(message, 'success', duration, options);\r\n        }\r\n\r\n        error(message, duration, options) {\r\n            return this.show(message, 'error', duration, options);\r\n        }\r\n\r\n        warning(message, duration, options) {\r\n            return this.show(message, 'warning', duration, options);\r\n        }\r\n\r\n        info(message, duration, options) {\r\n            return this.show(message, 'info', duration, options);\r\n        }\r\n\r\n        loading(message, duration = 0, options) {\r\n            return this.show(message, 'loading', duration, options);\r\n        }\r\n    }\r\n\r\n// Initialize notification system\r\n    const notificationSystem = new NotificationSystem();\r\n\r\n// ===== INTEGRATION WITH EXISTING FEATURES =====\r\n// Add notifications to form submissions\r\n    function enhanceFormSubmissions() {\r\n        // Booking form success\r\n        const bookingForm = document.getElementById('bookingForm');\r\n        if (bookingForm) {\r\n            const originalHandler = bookingForm.onsubmit;\r\n            bookingForm.addEventListener('submit', function (e) {\r\n                e.preventDefault();\r\n                if (validate()) {\r\n                    notificationSystem.success('Booking request submitted successfully! We will contact you soon.', 6000);\r\n                    form.reset();\r\n                } else {\r\n                    notificationSystem.error('Please fix the errors above before submitting.', 5000);\r\n                }\r\n            });\r\n        }\r\n\r\n        // Contact form success\r\n        const contactForm = document.getElementById('contactForm');\r\n        if (contactForm) {\r\n            contactForm.addEventListener('submit', function (e) {\r\n                e.preventDefault();\r\n                if (validateContact()) {\r\n                    notificationSystem.success('Message sent successfully! We will get back to you soon.', 6000);\r\n                    contactForm.reset();\r\n                } else {\r\n                    notificationSystem.error('Please fix the errors above before submitting.', 5000);\r\n                }\r\n            });\r\n        }\r\n\r\n        // Package selection notifications\r\n        document.querySelectorAll('.package-select-btn').forEach(btn => {\r\n            btn.addEventListener('click', function () {\r\n                const packageType = this.dataset.packageType;\r\n                notificationSystem.info(`Selected ${packageType} package. Redirecting to booking...`, 3000);\r\n            });\r\n        });\r\n\r\n        // Destination button notifications\r\n        document.querySelectorAll('.destination-btn').forEach(btn => {\r\n            btn.addEventListener('click', function () {\r\n                const destination = this.dataset.destination;\r\n                notificationSystem.info('Loading destination details...', 2000);\r\n            });\r\n        });\r\n\r\n        // Theme toggle notification\r\n        const themeToggle = document.getElementById('themeToggle');\r\n        if (themeToggle) {\r\n            themeToggle.addEventListener('click', function () {\r\n                const currentTheme = document.documentElement.getAttribute('data-theme');\r\n                const newTheme = currentTheme === 'dark' ? 'light' : 'dark';\r\n                notificationSystem.info(`Switched to ${newTheme} theme`, 2000);\r\n            });\r\n        }\r\n    }\r\n\r\n// ===== SCROLL-BASED NOTIFICATIONS =====\r\n    function initScrollNotifications() {\r\n        let sectionsViewed = new Set();\r\n\r\n        function checkScrollPosition() {\r\n            const sections = document.querySelectorAll('section[id]');\r\n            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\r\n            const windowHeight = window.innerHeight;\r\n\r\n            sections.forEach(section => {\r\n                const sectionTop = section.offsetTop;\r\n                const sectionHeight = section.offsetHeight;\r\n                const sectionId = section.id;\r\n\r\n                // Check if section is in viewport\r\n                if (scrollTop + windowHeight > sectionTop && scrollTop < sectionTop + sectionHeight) {\r\n                    if (!sectionsViewed.has(sectionId)) {\r\n                        sectionsViewed.add(sectionId);\r\n\r\n                        // Show section-specific notifications\r\n                        switch (sectionId) {\r\n                            case 'destinations':\r\n                                notificationSystem.info('Discover our amazing destinations! \uD83C\uDF0D', 3000);\r\n                                break;\r\n                            case 'packages':\r\n                                notificationSystem.info('Check out our travel packages! ✈\uFE0F', 3000);\r\n                                break;\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        // Throttle scroll events\r\n        let ticking = false;\r\n\r\n        function requestTick() {\r\n            if (!ticking) {\r\n                requestAnimationFrame(checkScrollPosition);\r\n                ticking = true;\r\n            }\r\n        }\r\n\r\n        function handleScroll() {\r\n            ticking = false;\r\n            requestTick();\r\n        }\r\n\r\n        window.addEventListener('scroll', handleScroll, {passive: true});\r\n    }\r\n\r\n// ===== INITIALIZATION =====\r\n    document.addEventListener('DOMContentLoaded', function () {\r\n        // Initialize scroll progress bar\r\n        initScrollProgressBar();\r\n\r\n        // Initialize notification system\r\n        enhanceFormSubmissions();\r\n\r\n        // Initialize scroll-based notifications\r\n        initScrollNotifications();\r\n\r\n        // Show welcome notification\r\n        setTimeout(() => {\r\n            notificationSystem.info('Welcome to BlueWave Travel! \uD83C\uDFD6\uFE0F', 4000);\r\n        }, 1000);\r\n    });\r\n\r\n// Make notification system globally available\r\n    window.notificationSystem = notificationSystem;\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/js/app.js b/js/app.js
--- a/js/app.js	(revision 31ad26fe40a4cca22c892ee802d6b98233120111)
+++ b/js/app.js	(date 1762537659785)
@@ -474,4 +474,4 @@
 
 // Make notification system globally available
     window.notificationSystem = notificationSystem;
-}
+}
\ No newline at end of file
